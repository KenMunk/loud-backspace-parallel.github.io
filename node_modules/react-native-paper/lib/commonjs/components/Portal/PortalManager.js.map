{"version":3,"names":["PortalManager","React","PureComponent","portals","key","children","setState","state","map","item","filter","render","StyleSheet","absoluteFill"],"sources":["PortalManager.tsx"],"sourcesContent":["import * as React from 'react';\nimport { View, StyleSheet } from 'react-native';\n\ntype State = {\n  portals: Array<{\n    key: number;\n    children: React.ReactNode;\n  }>;\n};\n\n/**\n * Portal host is the component which actually renders all Portals.\n */\nexport default class PortalManager extends React.PureComponent<{}, State> {\n  state: State = {\n    portals: [],\n  };\n\n  mount = (key: number, children: React.ReactNode) => {\n    this.setState((state) => ({\n      portals: [...state.portals, { key, children }],\n    }));\n  };\n\n  update = (key: number, children: React.ReactNode) =>\n    this.setState((state) => ({\n      portals: state.portals.map((item) => {\n        if (item.key === key) {\n          return { ...item, children };\n        }\n        return item;\n      }),\n    }));\n\n  unmount = (key: number) =>\n    this.setState((state) => ({\n      portals: state.portals.filter((item) => item.key !== key),\n    }));\n\n  render() {\n    return this.state.portals.map(({ key, children }) => (\n      <View\n        key={key}\n        collapsable={\n          false /* Need collapsable=false here to clip the elevations, otherwise they appear above sibling components */\n        }\n        pointerEvents=\"box-none\"\n        style={StyleSheet.absoluteFill}\n      >\n        {children}\n      </View>\n    ));\n  }\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;;;;;;;AASA;AACA;AACA;AACe,MAAMA,aAAN,SAA4BC,KAAK,CAACC,aAAlC,CAA2D;EAAA;IAAA;;IAAA,+BACzD;MACbC,OAAO,EAAE;IADI,CADyD;;IAAA,+BAKhE,CAACC,GAAD,EAAcC,QAAd,KAA4C;MAClD,KAAKC,QAAL,CAAeC,KAAD,KAAY;QACxBJ,OAAO,EAAE,CAAC,GAAGI,KAAK,CAACJ,OAAV,EAAmB;UAAEC,GAAF;UAAOC;QAAP,CAAnB;MADe,CAAZ,CAAd;IAGD,CATuE;;IAAA,gCAW/D,CAACD,GAAD,EAAcC,QAAd,KACP,KAAKC,QAAL,CAAeC,KAAD,KAAY;MACxBJ,OAAO,EAAEI,KAAK,CAACJ,OAAN,CAAcK,GAAd,CAAmBC,IAAD,IAAU;QACnC,IAAIA,IAAI,CAACL,GAAL,KAAaA,GAAjB,EAAsB;UACpB,OAAO,EAAE,GAAGK,IAAL;YAAWJ;UAAX,CAAP;QACD;;QACD,OAAOI,IAAP;MACD,CALQ;IADe,CAAZ,CAAd,CAZsE;;IAAA,iCAqB7DL,GAAD,IACR,KAAKE,QAAL,CAAeC,KAAD,KAAY;MACxBJ,OAAO,EAAEI,KAAK,CAACJ,OAAN,CAAcO,MAAd,CAAsBD,IAAD,IAAUA,IAAI,CAACL,GAAL,KAAaA,GAA5C;IADe,CAAZ,CAAd,CAtBsE;EAAA;;EA0BxEO,MAAM,GAAG;IACP,OAAO,KAAKJ,KAAL,CAAWJ,OAAX,CAAmBK,GAAnB,CAAuB;MAAA,IAAC;QAAEJ,GAAF;QAAOC;MAAP,CAAD;MAAA,oBAC5B,oBAAC,iBAAD;QACE,GAAG,EAAED,GADP;QAEE,WAAW,EACT;QAAM;QAHV;QAKE,aAAa,EAAC,UALhB;QAME,KAAK,EAAEQ,uBAAA,CAAWC;MANpB,GAQGR,QARH,CAD4B;IAAA,CAAvB,CAAP;EAYD;;AAvCuE"}