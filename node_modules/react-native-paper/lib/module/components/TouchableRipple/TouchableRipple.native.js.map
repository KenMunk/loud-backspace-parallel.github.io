{"version":3,"names":["React","Platform","StyleSheet","Pressable","withInternalTheme","getTouchableRippleColors","ANDROID_VERSION_LOLLIPOP","ANDROID_VERSION_PIE","TouchableRipple","style","background","borderless","disabled","disabledProp","rippleColor","underlayColor","children","theme","rest","showUnderlay","setShowUnderlay","useState","onPress","calculatedRippleColor","calculatedUnderlayColor","useForeground","OS","Version","handlePressIn","e","onPressIn","handlePressOut","onPressOut","supported","styles","overflowHidden","color","foreground","Children","only","backgroundColor","create","overflow"],"sources":["TouchableRipple.native.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  PressableAndroidRippleConfig,\n  StyleProp,\n  Platform,\n  ViewStyle,\n  StyleSheet,\n  Pressable,\n  GestureResponderEvent,\n} from 'react-native';\n\nimport { withInternalTheme } from '../../core/theming';\nimport type { InternalTheme } from '../../types';\nimport { getTouchableRippleColors } from './utils';\n\nconst ANDROID_VERSION_LOLLIPOP = 21;\nconst ANDROID_VERSION_PIE = 28;\n\ntype Props = React.ComponentProps<typeof Pressable> & {\n  borderless?: boolean;\n  background?: PressableAndroidRippleConfig;\n  disabled?: boolean;\n  onPress?: () => void | null;\n  rippleColor?: string;\n  underlayColor?: string;\n  children: React.ReactNode;\n  style?: StyleProp<ViewStyle>;\n  theme: InternalTheme;\n};\n\nconst TouchableRipple = ({\n  style,\n  background,\n  borderless = false,\n  disabled: disabledProp,\n  rippleColor,\n  underlayColor,\n  children,\n  theme,\n  ...rest\n}: Props) => {\n  const [showUnderlay, setShowUnderlay] = React.useState<boolean>(false);\n\n  const disabled = disabledProp || !rest.onPress;\n  const { calculatedRippleColor, calculatedUnderlayColor } =\n    getTouchableRippleColors({\n      theme,\n      rippleColor,\n      underlayColor,\n    });\n\n  // A workaround for ripple on Android P is to use useForeground + overflow: 'hidden'\n  // https://github.com/facebook/react-native/issues/6480\n  const useForeground =\n    Platform.OS === 'android' &&\n    Platform.Version >= ANDROID_VERSION_PIE &&\n    borderless;\n\n  const handlePressIn = (e: GestureResponderEvent) => {\n    setShowUnderlay(true);\n    rest.onPressIn?.(e);\n  };\n\n  const handlePressOut = (e: GestureResponderEvent) => {\n    setShowUnderlay(false);\n    rest.onPressOut?.(e);\n  };\n\n  if (TouchableRipple.supported) {\n    return (\n      <Pressable\n        {...rest}\n        disabled={disabled}\n        style={[borderless && styles.overflowHidden, style]}\n        android_ripple={\n          background != null\n            ? background\n            : {\n                color: calculatedRippleColor,\n                borderless,\n                foreground: useForeground,\n              }\n        }\n      >\n        {React.Children.only(children)}\n      </Pressable>\n    );\n  }\n\n  return (\n    <Pressable\n      {...rest}\n      disabled={disabled}\n      style={[\n        borderless && styles.overflowHidden,\n        showUnderlay && { backgroundColor: calculatedUnderlayColor },\n        style,\n      ]}\n      onPressIn={handlePressIn}\n      onPressOut={handlePressOut}\n    >\n      {React.Children.only(children)}\n    </Pressable>\n  );\n};\n\nTouchableRipple.supported =\n  Platform.OS === 'android' && Platform.Version >= ANDROID_VERSION_LOLLIPOP;\n\nconst styles = StyleSheet.create({\n  overflowHidden: {\n    overflow: 'hidden',\n  },\n});\n\nexport default withInternalTheme(TouchableRipple);\n"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAGEC,QAHF,EAKEC,UALF,EAMEC,SANF,QAQO,cARP;AAUA,SAASC,iBAAT,QAAkC,oBAAlC;AAEA,SAASC,wBAAT,QAAyC,SAAzC;AAEA,MAAMC,wBAAwB,GAAG,EAAjC;AACA,MAAMC,mBAAmB,GAAG,EAA5B;;AAcA,MAAMC,eAAe,GAAG,QAUX;EAAA,IAVY;IACvBC,KADuB;IAEvBC,UAFuB;IAGvBC,UAAU,GAAG,KAHU;IAIvBC,QAAQ,EAAEC,YAJa;IAKvBC,WALuB;IAMvBC,aANuB;IAOvBC,QAPuB;IAQvBC,KARuB;IASvB,GAAGC;EAToB,CAUZ;EACX,MAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCpB,KAAK,CAACqB,QAAN,CAAwB,KAAxB,CAAxC;EAEA,MAAMT,QAAQ,GAAGC,YAAY,IAAI,CAACK,IAAI,CAACI,OAAvC;EACA,MAAM;IAAEC,qBAAF;IAAyBC;EAAzB,IACJnB,wBAAwB,CAAC;IACvBY,KADuB;IAEvBH,WAFuB;IAGvBC;EAHuB,CAAD,CAD1B,CAJW,CAWX;EACA;;EACA,MAAMU,aAAa,GACjBxB,QAAQ,CAACyB,EAAT,KAAgB,SAAhB,IACAzB,QAAQ,CAAC0B,OAAT,IAAoBpB,mBADpB,IAEAI,UAHF;;EAKA,MAAMiB,aAAa,GAAIC,CAAD,IAA8B;IAAA;;IAClDT,eAAe,CAAC,IAAD,CAAf;IACA,mBAAAF,IAAI,CAACY,SAAL,yEAAAZ,IAAI,EAAaW,CAAb,CAAJ;EACD,CAHD;;EAKA,MAAME,cAAc,GAAIF,CAAD,IAA8B;IAAA;;IACnDT,eAAe,CAAC,KAAD,CAAf;IACA,oBAAAF,IAAI,CAACc,UAAL,2EAAAd,IAAI,EAAcW,CAAd,CAAJ;EACD,CAHD;;EAKA,IAAIrB,eAAe,CAACyB,SAApB,EAA+B;IAC7B,oBACE,oBAAC,SAAD,eACMf,IADN;MAEE,QAAQ,EAAEN,QAFZ;MAGE,KAAK,EAAE,CAACD,UAAU,IAAIuB,MAAM,CAACC,cAAtB,EAAsC1B,KAAtC,CAHT;MAIE,cAAc,EACZC,UAAU,IAAI,IAAd,GACIA,UADJ,GAEI;QACE0B,KAAK,EAAEb,qBADT;QAEEZ,UAFF;QAGE0B,UAAU,EAAEZ;MAHd;IAPR,IAcGzB,KAAK,CAACsC,QAAN,CAAeC,IAAf,CAAoBvB,QAApB,CAdH,CADF;EAkBD;;EAED,oBACE,oBAAC,SAAD,eACME,IADN;IAEE,QAAQ,EAAEN,QAFZ;IAGE,KAAK,EAAE,CACLD,UAAU,IAAIuB,MAAM,CAACC,cADhB,EAELhB,YAAY,IAAI;MAAEqB,eAAe,EAAEhB;IAAnB,CAFX,EAGLf,KAHK,CAHT;IAQE,SAAS,EAAEmB,aARb;IASE,UAAU,EAAEG;EATd,IAWG/B,KAAK,CAACsC,QAAN,CAAeC,IAAf,CAAoBvB,QAApB,CAXH,CADF;AAeD,CA1ED;;AA4EAR,eAAe,CAACyB,SAAhB,GACEhC,QAAQ,CAACyB,EAAT,KAAgB,SAAhB,IAA6BzB,QAAQ,CAAC0B,OAAT,IAAoBrB,wBADnD;AAGA,MAAM4B,MAAM,GAAGhC,UAAU,CAACuC,MAAX,CAAkB;EAC/BN,cAAc,EAAE;IACdO,QAAQ,EAAE;EADI;AADe,CAAlB,CAAf;AAMA,eAAetC,iBAAiB,CAACI,eAAD,CAAhC"}